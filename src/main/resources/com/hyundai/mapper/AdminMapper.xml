<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hyundai.global.mapper.AdminMapper">

    <resultMap id="memberMap" type="com.hyundai.domain.login.dto.MemberDto">
        <id property="memberId" column="member_id"/>
        <result property="memberEmail" column="member_email"/>
        <result property="memberName" column="member_name"/>
        <result property="memberNickname" column="member_nickname"/>
        <result property="memberPhone" column="member_phone"/>
        <result property="memberImage" column="member_image"/>
        <result property="memberGender" column="member_gender"/>
        <result property="memberRole" column="member_role"/>
        <result property="memberBirth" column="member_birth"/>
        <result property="createdDate" column="created_at"/>
        <result property="updatedDate" column="updated_at"/>
        <result property="isDeleted" column="isDeleted"/>
    </resultMap>

    <select id="getListByStandard">
        <![CDATA[
        SELECT member_id
             , member_email
             , member_name
             , member_nickname
             , member_phone
             , member_image
             , member_gender
             , member_birth
             , member_role
             , created_at
             , updated_at
             , isDeleted
        FROM (SELECT
                  /*+ INDEX_DESC(tb1_board pk_board) */ rownum rn
                   , member_id
                   , member_email
                   , member_name
                   , member_nickname
                   , member_phone
                   , member_image
                   , member_gender
                   , member_birth
                   , member_role
                   , created_at
                   , updated_date
                   , NVL(deleted_date, 'N') AS "isDeleted"
              FROM tbl_member
              where rownum <= #{cri.pageNum} * #{cri.amount}
              ORDER BY #{standard}
             )
        WHERE rn > (#{pageNum} - 1) * #{amount}
        ]]>
    </select>
</mapper>